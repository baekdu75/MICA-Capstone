// ---------- Get insurance for selected vehicles ----------
    function getInsuranceByModel() {
      const evModel = $('evModel').value;
      const hybridModel = $('hybridModel').value;
      const gasModel = $('gasModel').value;

      const insuranceMap = {
        'Model 3': DEFAULTS.insTesla3,
        'Model Y': DEFAULTS.insTeslaY,
        'Model S': DEFAULTS.insTeslaS,
        'Model X': DEFAULTS.insTeslaX,
        'Toyota Prius': DEFAULTS.insPrius,
        'Toyota RAV4': DEFAULTS.insRAV4H,
        'Honda Accord Hybrid': DEFAULTS.insAccordH,
        'Toyota Camry': DEFAULTS.insCamryH,
        'Toyota Highlander': DEFAULTS.insHighlanderH,
        'Honda Civic': DEFAULTS.insCivic,
        'Honda CR-V': DEFAULTS.insCRV,
        'Chevy Equinox': DEFAULTS.insEquinox
      };

      return {
        evIns: insuranceMap[evModel] || DEFAULTS.insEV,
        hybridIns: insuranceMap[hybridModel] || DEFAULTS.insHybrid,
        gasIns: insuranceMap[gasModel] || DEFAULTS.insGas
      };
    }

    // ---------- Recalc ----------
    function recalc() {
      const state = $('state').value;
      const miles = $('miles').value;

      if (state && miles) {
        const result = monthlyCosts({
          state,
          annualMiles: parseInt(miles, 10) || 0,
          needsCharger: $('needsChargerYes').checked,
          homeChargePct: parseInt($('homeChargePct').value, 10) || 0
        });

        chart.data.datasets[0].data = [result.evFuelMonth, result.hybridFuelMonth, result.gasFuelMonth];
        chart.data.datasets[3].data = [result.chargerMonthly, 0, 0];
      }

      const insurance = getInsuranceByModel();
      chart.data.datasets[1].data = [insurance.evIns, insurance.hybridIns, insurance.gasIns];
      chart.data.datasets[2].data = [DEFAULTS.maintEV, DEFAULTS.maintHybrid, DEFAULTS.maintGas];

      chart.update();
    }
